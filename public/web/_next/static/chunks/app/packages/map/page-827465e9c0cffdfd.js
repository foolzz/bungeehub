(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{1150:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=a(5155),l=a(2115),r=a(4437);function n(e){return{default:e&&"default"in e?e.default:e}}a(6552);let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},a=(0,l.lazy)(()=>t.loader().then(n)),d=t.loading;function o(e){let n=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,o=i?l.Suspense:l.Fragment,c=t.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(a,{...e})]}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(o,{...i?{fallback:n}:{},children:c})}return o.displayName="LoadableComponent",o}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return i}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new s}function n(e){return l?l.bind(e):s.bind(e)}function i(){return l?l.snapshot():function(e,...t){return e(...t)}}},4437:(e,t,a)=>{"use strict";function s(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),a(4553)},6278:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let s=a(8140)._(a(1150));function l(e,t){var a;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,s.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6435:(e,t,a)=>{Promise.resolve().then(a.bind(a,6914))},6552:(e,t,a)=>{"use strict";function s(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}}),a(5155),a(7650),a(8567),a(7278)},6914:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(5155),l=a(2115),r=a(6278),n=a.n(r),i=a(7621);let d=n()(()=>Promise.all([a.e(761),a.e(538)]).then(a.bind(a,3538)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[3538]},ssr:!1}),o=n()(()=>Promise.all([a.e(761),a.e(538)]).then(a.bind(a,3538)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[3538]},ssr:!1}),c=n()(()=>Promise.all([a.e(761),a.e(538)]).then(a.bind(a,3538)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[3538]},ssr:!1}),u=n()(()=>Promise.all([a.e(761),a.e(538)]).then(a.bind(a,3538)).then(e=>e.Popup),{loadableGenerated:{webpack:()=>[3538]},ssr:!1}),p=n()(()=>Promise.all([a.e(761),a.e(538)]).then(a.bind(a,3538)).then(e=>e.CircleMarker),{loadableGenerated:{webpack:()=>[3538]},ssr:!1});function h(){let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)([]),[h,g]=(0,l.useState)(!0),[m,x]=(0,l.useState)(""),[b,f]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[v,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{{let e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(e)}a.e(761).then(a.t.bind(a,5027,23)).then(e=>{N(e),delete e.Icon.Default.prototype._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})})},[]),(0,l.useEffect)(()=>{w()},[]);let w=async()=>{try{var e,a;g(!0);let[s,l]=await Promise.all([i.ox.getAll({limit:1e3}),i.bI.getAll()]),r=(null==(e=s.data)?void 0:e.data)||[],d=(null==(a=l.data)?void 0:a.data)||[],o=r.filter(e=>e.deliveryLatitude&&e.deliveryLongitude);t(o),n(d)}catch(e){console.error("Error fetching data:",e),x("Failed to load map data")}finally{g(!1)}},_=e=>({PENDING:"#FCD34D",IN_TRANSIT:"#60A5FA",AT_HUB:"#A78BFA",OUT_FOR_DELIVERY:"#818CF8",DELIVERED:"#34D399",FAILED:"#F87171",RETURNED:"#9CA3AF"})[e]||"#9CA3AF",k=e.filter(e=>(!b||e.status===b)&&(!j||e.assignedHubId===j)),A=r.length>0&&r[0].latitude&&r[0].longitude?[parseFloat(r[0].latitude),parseFloat(r[0].longitude)]:[37.7749,-122.4194];return h?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading map..."})}):v?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Packages Map View"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("a",{href:"/packages",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"List View"}),(0,s.jsx)("a",{href:"/dashboard",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Dashboard"})]})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,s.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"PENDING",children:"Pending"}),(0,s.jsx)("option",{value:"IN_TRANSIT",children:"In Transit"}),(0,s.jsx)("option",{value:"AT_HUB",children:"At Hub"}),(0,s.jsx)("option",{value:"OUT_FOR_DELIVERY",children:"Out for Delivery"}),(0,s.jsx)("option",{value:"DELIVERED",children:"Delivered"}),(0,s.jsx)("option",{value:"FAILED",children:"Failed"}),(0,s.jsx)("option",{value:"RETURNED",children:"Returned"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Hub"}),(0,s.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900",children:[(0,s.jsx)("option",{value:"",children:"All Hubs"}),r.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",k.length," of ",e.length," packages"]})})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-700",children:"Status Legend:"}),["PENDING","IN_TRANSIT","AT_HUB","OUT_FOR_DELIVERY","DELIVERED"].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_(e)}}),(0,s.jsx)("span",{className:"text-gray-600",children:e.replace("_"," ")})]},e))]})]})}),m&&(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4",children:(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",style:{height:"600px"},children:(0,s.jsxs)(d,{center:A,zoom:12,style:{height:"100%",width:"100%"},children:[(0,s.jsx)(o,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.map(e=>{if(!e.latitude||!e.longitude)return null;let t=parseFloat(e.latitude),a=parseFloat(e.longitude);return(0,s.jsx)(c,{position:[t,a],children:(0,s.jsx)(u,{children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),(0,s.jsxs)("p",{className:"text-sm mt-1",children:[(0,s.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Rating:"})," â˜… ",e.rating||"0.0"]})]})})},"hub-".concat(e.id))}),k.map(e=>{var t,a;let l=parseFloat(e.deliveryLatitude),r=parseFloat(e.deliveryLongitude),n=_(e.status);return(0,s.jsx)(p,{center:[l,r],radius:6,fillColor:n,fillOpacity:.7,color:"#fff",weight:2,children:(0,s.jsx)(u,{children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h3",{className:"font-bold",children:e.trackingNumber}),(0,s.jsxs)("p",{className:"text-sm mt-1",children:[(0,s.jsx)("strong",{children:"Status:"})," ",(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:n,color:"#fff"},children:e.status.replace("_"," ")})]}),(0,s.jsxs)("p",{className:"text-sm mt-1",children:[(0,s.jsx)("strong",{children:"Recipient:"})," ",e.recipientName||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Address:"})," ",e.deliveryAddress]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Hub:"})," ",(null==(t=e.assignedHub)?void 0:t.name)||(null==(a=e.hub)?void 0:a.name)||"N/A"]}),e.senderName&&(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Sender:"})," ",e.senderName]})]})})},e.id)})]})})})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Initializing map..."})})}},7621:(e,t,a)=>{"use strict";a.d(t,{ZQ:()=>n,bI:()=>i,ic:()=>o,ox:()=>d});var s=a(5125);let l=a(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",r=s.A.create({baseURL:l,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let n={login:(e,t)=>r.post("/auth/login",{email:e,password:t}),register:e=>r.post("/auth/register",e),getProfile:()=>r.get("/auth/profile")},i={getAll:()=>r.get("/hubs"),getMyHubs:()=>r.get("/hubs/my-hubs"),getById:e=>r.get("/hubs/".concat(e)),getMetrics:(e,t)=>r.get("/hubs/".concat(e,"/metrics"),{params:{days:t}}),create:e=>r.post("/hubs",e),update:(e,t)=>r.put("/hubs/".concat(e),t)},d={getAll:e=>r.get("/packages",{params:e}),getById:e=>r.get("/packages/".concat(e)),track:e=>r.get("/packages/tracking/".concat(e)),create:e=>r.post("/packages",e),update:(e,t)=>r.put("/packages/".concat(e),t),delete:e=>r.delete("/packages/".concat(e))},o={getDashboard:()=>r.get("/admin/dashboard"),getPendingApplications:(e,t)=>r.get("/admin/applications/pending",{params:{page:e,limit:t}}),getApplicationDetails:e=>r.get("/admin/applications/".concat(e)),reviewApplication:(e,t)=>r.post("/admin/applications/".concat(e,"/review"),t)}},7828:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,a(4054).createAsyncLocalStorage)()},8567:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=a(7828)}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=6435)),_N_E=e.O()}]);