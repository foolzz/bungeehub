(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{2582:(e,a,t)=>{Promise.resolve().then(t.bind(t,5532))},5532:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(5155),s=t(2115),i=t(7621),d=t(5125);function l(){let[e,a]=(0,s.useState)(null),[t,l]=(0,s.useState)(!0),[n,c]=(0,s.useState)(""),[o,u]=(0,s.useState)(""),[m,p]=(0,s.useState)(!1),[g,h]=(0,s.useState)({name:"",address:"",latitude:"",longitude:"",capacity:""});(0,s.useEffect)(()=>{(async()=>{let e=new URLSearchParams(window.location.search).get("id");if(!e){c("No hub ID provided"),l(!1);return}u(e),await b(e)})()},[]);let b=async e=>{var t,r,s,d;try{l(!0);let d=(await i.ZQ.getProfile()).data,n=(await i.bI.getById(e)).data;if(d.id!==n.hostId&&"ADMIN"!==d.role){c("You do not have permission to edit this hub"),l(!1);return}p(!0),a(n),h({name:n.name||"",address:n.address||"",latitude:(null==(t=n.latitude)?void 0:t.toString())||"",longitude:(null==(r=n.longitude)?void 0:r.toString())||"",capacity:(null==(s=n.capacity)?void 0:s.toString())||""})}catch(e){console.error("Error:",e),(null==(d=e.response)?void 0:d.status)===401?window.location.href="/login":c("Failed to load hub details")}finally{l(!1)}},x=async e=>{e.preventDefault();try{let e=localStorage.getItem("token");await d.A.put("http://localhost:8080/api/v1/hubs/".concat(o),{name:g.name,address:g.address,latitude:parseFloat(g.latitude),longitude:parseFloat(g.longitude),capacity:parseInt(g.capacity)},{headers:{Authorization:"Bearer ".concat(e)}}),alert("Hub updated successfully!"),window.location.href="/hubs/details?id=".concat(o)}catch(e){var a,t;console.error("Error updating hub:",e),alert("Failed to update hub: "+((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||e.message))}},y=e=>{h({...g,[e.target.name]:e.target.value})};return t?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-xl",children:"Loading..."})}):n||!m?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl text-red-600 mb-4",children:n||"Access denied"}),(0,r.jsx)("a",{href:"/dashboard",className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700",children:"Back to Dashboard"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Hub"}),(0,r.jsx)("a",{href:"/hubs/details?id=".concat(o),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Cancel"})]}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,r.jsx)("form",{onSubmit:x,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hub Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:g.name,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,r.jsx)("input",{type:"text",name:"address",value:g.address,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",required:!0,placeholder:"123 Main St, City, Province Postal"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),(0,r.jsx)("input",{type:"number",name:"latitude",step:"0.000001",value:g.latitude,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",required:!0,placeholder:"43.8828"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),(0,r.jsx)("input",{type:"number",name:"longitude",step:"0.000001",value:g.longitude,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",required:!0,placeholder:"-79.4403"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity (packages)"}),(0,r.jsx)("input",{type:"number",name:"capacity",value:g.capacity,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",required:!0,min:"1",placeholder:"100"})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Note:"})," Changes to your hub may require admin approval before they take effect."]})}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"submit",className:"bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700 font-medium",children:"Save Changes"}),(0,r.jsx)("a",{href:"/hubs/details?id=".concat(o),className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"})]})]})})})]})})}},7621:(e,a,t)=>{"use strict";t.d(a,{ZQ:()=>d,bI:()=>l,ic:()=>c,ox:()=>n});var r=t(5125);let s=t(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",i=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let d={login:(e,a)=>i.post("/auth/login",{email:e,password:a}),register:e=>i.post("/auth/register",e),getProfile:()=>i.get("/auth/profile")},l={getAll:()=>i.get("/hubs"),getMyHubs:()=>i.get("/hubs/my-hubs"),getById:e=>i.get("/hubs/".concat(e)),getMetrics:(e,a)=>i.get("/hubs/".concat(e,"/metrics"),{params:{days:a}}),create:e=>i.post("/hubs",e),update:(e,a)=>i.put("/hubs/".concat(e),a)},n={getAll:e=>i.get("/packages",{params:e}),getById:e=>i.get("/packages/".concat(e)),track:e=>i.get("/packages/tracking/".concat(e)),create:e=>i.post("/packages",e),update:(e,a)=>i.put("/packages/".concat(e),a),delete:e=>i.delete("/packages/".concat(e))},c={getDashboard:()=>i.get("/admin/dashboard"),getPendingApplications:(e,a)=>i.get("/admin/applications/pending",{params:{page:e,limit:a}}),getApplicationDetails:e=>i.get("/admin/applications/".concat(e)),reviewApplication:(e,a)=>i.post("/admin/applications/".concat(e,"/review"),a)}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=2582)),_N_E=e.O()}]);