(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[981],{6969:(e,a,t)=>{Promise.resolve().then(t.bind(t,9917))},7621:(e,a,t)=>{"use strict";t.d(a,{ZQ:()=>i,bI:()=>n,ic:()=>o,ox:()=>d});var s=t(5125);let r=t(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",l=s.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let i={login:(e,a)=>l.post("/auth/login",{email:e,password:a}),register:e=>l.post("/auth/register",e),getProfile:()=>l.get("/auth/profile")},n={getAll:()=>l.get("/hubs"),getMyHubs:()=>l.get("/hubs/my-hubs"),getById:e=>l.get("/hubs/".concat(e)),getMetrics:(e,a)=>l.get("/hubs/".concat(e,"/metrics"),{params:{days:a}}),create:e=>l.post("/hubs",e),update:(e,a)=>l.put("/hubs/".concat(e),a)},d={getAll:e=>l.get("/packages",{params:e}),getById:e=>l.get("/packages/".concat(e)),track:e=>l.get("/packages/tracking/".concat(e)),create:e=>l.post("/packages",e),update:(e,a)=>l.put("/packages/".concat(e),a),delete:e=>l.delete("/packages/".concat(e))},o={getDashboard:()=>l.get("/admin/dashboard"),getPendingApplications:(e,a)=>l.get("/admin/applications/pending",{params:{page:e,limit:a}}),getApplicationDetails:e=>l.get("/admin/applications/".concat(e)),reviewApplication:(e,a)=>l.post("/admin/applications/".concat(e,"/review"),a)}},9917:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var s=t(5155),r=t(2115),l=t(7621);function i(){let[e,a]=(0,r.useState)(null),[t,i]=(0,r.useState)(!0),[n,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)({name:"",address:"",latitude:"",longitude:"",capacity:"100"});(0,r.useEffect)(()=>{(async()=>{try{let e=(await l.ZQ.getProfile()).data;if("HUB_HOST"!==e.role){window.location.href="/dashboard";return}a(e)}catch(e){window.location.href="/login"}finally{i(!1)}})()},[]);let h=e=>{x({...p,[e.target.name]:e.target.value})},g=async e=>{e.preventDefault(),c(""),d(!0);try{let e={name:p.name,address:p.address,capacity:parseInt(p.capacity)};p.latitude&&(e.latitude=parseFloat(p.latitude)),p.longitude&&(e.longitude=parseFloat(p.longitude)),await l.bI.create(e),u(!0),setTimeout(()=>{window.location.href="/dashboard"},2e3)}catch(e){var a,t;c((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to register hub. Please try again.")}finally{d(!1)}};return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading..."})}):m?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white shadow rounded-lg p-8 text-center",children:[(0,s.jsx)("div",{className:"text-green-600 text-6xl mb-4",children:"✓"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hub Registered Successfully!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Your hub application has been submitted and is pending admin approval."}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to dashboard..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Register Your Delivery Hub"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Fill out the information below to register your hub. Your application will be reviewed by our admin team."})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[o&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Hub Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"name",name:"name",type:"text",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm text-gray-900",placeholder:"e.g., Downtown Hub, Main Street Hub",value:p.name,onChange:h}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Choose a descriptive name for your delivery hub"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:["Full Address ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{id:"address",name:"address",required:!0,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm text-gray-900",placeholder:"123 Main St, San Francisco, CA 94102",value:p.address,onChange:h}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Include street address, city, state, and ZIP code"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"latitude",className:"block text-sm font-medium text-gray-700",children:"Latitude (Optional)"}),(0,s.jsx)("input",{id:"latitude",name:"latitude",type:"number",step:"any",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm text-gray-900",placeholder:"37.7749",value:p.latitude,onChange:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"longitude",className:"block text-sm font-medium text-gray-700",children:"Longitude (Optional)"}),(0,s.jsx)("input",{id:"longitude",name:"longitude",type:"number",step:"any",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm text-gray-900",placeholder:"-122.4194",value:p.longitude,onChange:h})]})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["You can find coordinates using"," ",(0,s.jsx)("a",{href:"https://www.google.com/maps",target:"_blank",className:"text-primary-600 hover:underline",children:"Google Maps"})," ","(right-click on location → coordinates)"]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"capacity",className:"block text-sm font-medium text-gray-700",children:["Package Capacity ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"capacity",name:"capacity",type:"number",required:!0,min:"10",max:"1000",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm text-gray-900",placeholder:"100",value:p.capacity,onChange:h}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum number of packages your hub can handle at once (minimum: 10)"})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"What happens next?"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Your hub application will be submitted for admin review"}),(0,s.jsx)("li",{children:"An admin will verify your information and approve your hub"}),(0,s.jsx)("li",{children:"Once approved, your hub will be ACTIVE and start receiving packages"}),(0,s.jsx)("li",{children:"You'll be able to manage packages and view earnings from your dashboard"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>window.location.href="/dashboard",className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 font-medium disabled:opacity-50",children:n?"Submitting...":"Register Hub"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Hub Host Information"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",null==e?void 0:e.fullName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",null==e?void 0:e.email]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Phone:"})," ",(null==e?void 0:e.phone)||"Not provided"]})]})]})]})})}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=6969)),_N_E=e.O()}]);