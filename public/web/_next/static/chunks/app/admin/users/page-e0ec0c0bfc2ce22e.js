(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{2877:(e,t,s)=>{Promise.resolve().then(s.bind(s,9981))},7621:(e,t,s)=>{"use strict";s.d(t,{ZQ:()=>i,bI:()=>n,ic:()=>d,ox:()=>c});var a=s(5125);let r=s(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",l=a.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={login:(e,t)=>l.post("/auth/login",{email:e,password:t}),register:e=>l.post("/auth/register",e),getProfile:()=>l.get("/auth/profile")},n={getAll:()=>l.get("/hubs"),getMyHubs:()=>l.get("/hubs/my-hubs"),getById:e=>l.get("/hubs/".concat(e)),getMetrics:(e,t)=>l.get("/hubs/".concat(e,"/metrics"),{params:{days:t}}),create:e=>l.post("/hubs",e),update:(e,t)=>l.put("/hubs/".concat(e),t)},c={getAll:e=>l.get("/packages",{params:e}),getById:e=>l.get("/packages/".concat(e)),track:e=>l.get("/packages/tracking/".concat(e)),create:e=>l.post("/packages",e),update:(e,t)=>l.put("/packages/".concat(e),t),delete:e=>l.delete("/packages/".concat(e))},d={getDashboard:()=>l.get("/admin/dashboard"),getPendingApplications:(e,t)=>l.get("/admin/applications/pending",{params:{page:e,limit:t}}),getApplicationDetails:e=>l.get("/admin/applications/".concat(e)),reviewApplication:(e,t)=>l.post("/admin/applications/".concat(e,"/review"),t)}},9981:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(5155),r=s(2115),l=s(7621),i=s(5125);function n(){var e;let[t,s]=(0,r.useState)([]),[n,c]=(0,r.useState)(!0),[d,o]=(0,r.useState)(""),[x,h]=(0,r.useState)("PENDING"),[m,g]=(0,r.useState)(null),[p,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y()},[x]);let y=async()=>{try{let e=await l.ZQ.getProfile();if("ADMIN"!==e.data.role){window.location.href="/dashboard";return}await j()}catch(e){window.location.href="/login"}},j=async()=>{try{var e;c(!0);let t=localStorage.getItem("token"),a=await i.A.get("http://localhost:8080/api/v1/admin/users",{headers:{Authorization:"Bearer ".concat(t)},params:x?{status:x}:{}});s((null==(e=a.data)?void 0:e.data)||[])}catch(e){console.error("Error fetching users:",e),o("Failed to load users")}finally{c(!1)}},b=async(e,t,s)=>{try{let a=localStorage.getItem("token");await i.A.patch("http://localhost:8080/api/v1/admin/users/".concat(e,"/status"),{status:t,reason:s},{headers:{Authorization:"Bearer ".concat(a)}}),await j(),u(!1),alert("User ".concat(t.toLowerCase()," successfully"))}catch(e){var a,r;console.error("Error updating user status:",e),alert("Failed to update user status: "+((null==(r=e.response)||null==(a=r.data)?void 0:a.message)||e.message))}},N=e=>({ADMIN:"bg-red-100 text-red-800",HUB_HOST:"bg-purple-100 text-purple-800",CUSTOMER:"bg-blue-100 text-blue-800"})[e]||"bg-gray-100 text-gray-800",v=e=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",ACTIVE:"bg-green-100 text-green-800",SUSPENDED:"bg-red-100 text-red-800",REJECTED:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800";return n?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading users..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,a.jsx)("a",{href:"/admin",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Back to Admin Dashboard"})]}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,a.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900",children:[(0,a.jsx)("option",{value:"",children:"All Users"}),(0,a.jsx)("option",{value:"PENDING",children:"Pending Approval"}),(0,a.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,a.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,a.jsx)("option",{value:"SUSPENDED",children:"Suspended"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rejected"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",t.length," user",1!==t.length?"s":""]})})]})}),d&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),"PENDING"===x&&t.length>0&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-yellow-800",children:[(0,a.jsxs)("strong",{children:["⚠️ ",t.length," user",1!==t.length?"s":""," pending approval"]}),(0,a.jsx)("br",{}),"Review and approve or reject user registrations below."]})}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Details"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registered"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.email}),e.phone&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.phone})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(N(e.role)),children:null==(t=e.role)?void 0:t.replace("_"," ")})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(v(e.status||"ACTIVE")),children:e.status||"ACTIVE"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{g(e),u(!0)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"View"}),(!e.status||"PENDING"===e.status)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>b(e.id,"APPROVED"),className:"text-green-600 hover:text-green-800 font-medium",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>b(e.id,"REJECTED","Did not meet requirements"),className:"text-red-600 hover:text-red-800 font-medium",children:"Reject"})]}),"ACTIVE"===e.status&&(0,a.jsx)("button",{onClick:()=>b(e.id,"SUSPENDED","Policy violation"),className:"text-orange-600 hover:text-orange-800 font-medium",children:"Suspend"})]})]},e.id)})})]}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found for the selected filter"})]})]}),p&&m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"User Details"}),(0,a.jsx)("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),(0,a.jsx)("p",{className:"text-gray-900",children:m.fullName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900",children:m.email})]}),m.phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,a.jsx)("p",{className:"text-gray-900",children:m.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,a.jsx)("p",{className:"text-gray-900",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(N(m.role)),children:null==(e=m.role)?void 0:e.replace("_"," ")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,a.jsx)("p",{className:"text-gray-900",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(v(m.status||"ACTIVE")),children:m.status||"ACTIVE"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Registered"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(m.createdAt).toLocaleString()})]}),"HUB_HOST"===m.role&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Hub Information"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:'Check the "Manage Hubs" section for this user\'s hubs'})]})]}),(!m.status||"PENDING"===m.status)&&(0,a.jsxs)("div",{className:"flex gap-3 mt-6 pt-6 border-t",children:[(0,a.jsx)("button",{onClick:()=>b(m.id,"APPROVED"),className:"flex-1 bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 font-medium",children:"Approve User"}),(0,a.jsx)("button",{onClick:()=>b(m.id,"REJECTED","Did not meet requirements"),className:"flex-1 bg-red-600 text-white px-6 py-3 rounded-md hover:bg-red-700 font-medium",children:"Reject User"})]})]})]})})]})}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=2877)),_N_E=e.O()}]);