(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{7621:(e,t,a)=>{"use strict";a.d(t,{ZQ:()=>i,bI:()=>d,ic:()=>c,ox:()=>n});var s=a(5125);let r=a(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",l=s.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={login:(e,t)=>l.post("/auth/login",{email:e,password:t}),register:e=>l.post("/auth/register",e),getProfile:()=>l.get("/auth/profile")},d={getAll:()=>l.get("/hubs"),getMyHubs:()=>l.get("/hubs/my-hubs"),getById:e=>l.get("/hubs/".concat(e)),getMetrics:(e,t)=>l.get("/hubs/".concat(e,"/metrics"),{params:{days:t}}),create:e=>l.post("/hubs",e),update:(e,t)=>l.put("/hubs/".concat(e),t)},n={getAll:e=>l.get("/packages",{params:e}),getById:e=>l.get("/packages/".concat(e)),track:e=>l.get("/packages/tracking/".concat(e)),create:e=>l.post("/packages",e),update:(e,t)=>l.put("/packages/".concat(e),t),delete:e=>l.delete("/packages/".concat(e))},c={getDashboard:()=>l.get("/admin/dashboard"),getPendingApplications:(e,t)=>l.get("/admin/applications/pending",{params:{page:e,limit:t}}),getApplicationDetails:e=>l.get("/admin/applications/".concat(e)),reviewApplication:(e,t)=>l.post("/admin/applications/".concat(e,"/review"),t)}},8311:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),l=a(7621),i=a(5125);function d(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[n,c]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[x,p]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g()},[o]);let g=async()=>{try{let e=await l.ZQ.getProfile();if("ADMIN"!==e.data.role){window.location.href="/dashboard";return}await b()}catch(e){window.location.href="/login"}},b=async()=>{try{var e;d(!0);let a=localStorage.getItem("token"),s=o?{status:o}:{},r=await i.A.get("http://localhost:8080/api/v1/admin/hubs",{headers:{Authorization:"Bearer ".concat(a)},params:s});t((null==(e=r.data)?void 0:e.data)||[])}catch(e){console.error("Error fetching hubs:",e),c("Failed to load hubs")}finally{d(!1)}},v=async(e,t)=>{try{let a=localStorage.getItem("token");await i.A.patch("http://localhost:8080/api/v1/admin/hubs/".concat(e,"/status"),{status:t},{headers:{Authorization:"Bearer ".concat(a)}}),await b(),alert("Hub status updated successfully")}catch(e){var a,s;console.error("Error updating status:",e),alert("Failed to update hub status: "+((null==(s=e.response)||null==(a=s.data)?void 0:a.message)||e.message))}},y=async e=>{e.preventDefault();try{let e=localStorage.getItem("token");await i.A.put("http://localhost:8080/api/v1/admin/hubs/".concat(x.id),{name:x.name,address:x.address,latitude:parseFloat(x.latitude),longitude:parseFloat(x.longitude),capacity:parseInt(x.capacity),tier:x.tier},{headers:{Authorization:"Bearer ".concat(e)}}),m(!1),await b(),alert("Hub updated successfully")}catch(e){var t,a;console.error("Error updating hub:",e),alert("Failed to update hub: "+((null==(a=e.response)||null==(t=a.data)?void 0:t.message)||e.message))}};return a?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading hubs..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Hub Management"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("a",{href:"/admin",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Back to Admin Dashboard"})})]}),(0,s.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,s.jsxs)("select",{value:o,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"PENDING",children:"Pending"}),(0,s.jsx)("option",{value:"UNDER_REVIEW",children:"Under Review"}),(0,s.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,s.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,s.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,s.jsx)("option",{value:"SUSPENDED",children:"Suspended"}),(0,s.jsx)("option",{value:"REJECTED",children:"Rejected"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",e.length," hub",1!==e.length?"s":""]})})]})}),n&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:n}),(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hub Details"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Host"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.address}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Capacity: ",e.capacity]})]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(null==(t=e.host)?void 0:t.fullName)||"N/A"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:(null==(a=e.host)?void 0:a.email)||"N/A"})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("select",{value:e.status,onChange:t=>v(e.id,t.target.value),className:"text-xs px-2 py-1 rounded border border-gray-300",children:[(0,s.jsx)("option",{value:"PENDING",children:"Pending"}),(0,s.jsx)("option",{value:"UNDER_REVIEW",children:"Under Review"}),(0,s.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,s.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,s.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,s.jsx)("option",{value:"SUSPENDED",children:"Suspended"}),(0,s.jsx)("option",{value:"REJECTED",children:"Rejected"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tier}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-900",children:["Rating: â˜… ",e.rating||0]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Deliveries: ",e.totalDeliveries||0]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsx)("button",{onClick:()=>{p({...e}),m(!0)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"})})]},e.id)})})]})})]}),h&&x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Edit Hub"}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hub Name"}),(0,s.jsx)("input",{type:"text",value:x.name,onChange:e=>p({...x,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,s.jsx)("input",{type:"text",value:x.address,onChange:e=>p({...x,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),(0,s.jsx)("input",{type:"number",step:"0.0001",value:x.latitude,onChange:e=>p({...x,latitude:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),(0,s.jsx)("input",{type:"number",step:"0.0001",value:x.longitude,onChange:e=>p({...x,longitude:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),(0,s.jsx)("input",{type:"number",value:x.capacity,onChange:e=>p({...x,capacity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier"}),(0,s.jsxs)("select",{value:x.tier,onChange:e=>p({...x,tier:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{value:"NEW_HUB",children:"New Hub"}),(0,s.jsx)("option",{value:"ACTIVE_HUB",children:"Active Hub"}),(0,s.jsx)("option",{value:"TOP_HUB",children:"Top Hub"}),(0,s.jsx)("option",{value:"SUPER_HUB",children:"Super Hub"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Save Changes"}),(0,s.jsx)("button",{type:"button",onClick:()=>m(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})]})})]})}},9387:(e,t,a)=>{Promise.resolve().then(a.bind(a,8311))}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=9387)),_N_E=e.O()}]);