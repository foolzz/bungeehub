(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{730:(e,t,a)=>{Promise.resolve().then(a.bind(a,5782))},5782:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),l=a(2115),r=a(7621);function i(){let[e,t]=(0,l.useState)(null),[a,i]=(0,l.useState)(!0),[n,d]=(0,l.useState)(null),[o,c]=(0,l.useState)([]);return((0,l.useEffect)(()=>{(async()=>{try{let a=(await r.ZQ.getProfile()).data;if("ADMIN"!==a.role){window.location.href="/dashboard";return}t(a);try{let e=await r.ic.getDashboard();d(e.data)}catch(e){console.error("Error fetching dashboard stats:",e)}try{var e;let t=await r.ic.getPendingApplications(1,10);c((null==(e=t.data)?void 0:e.data)||[])}catch(e){console.error("Error fetching applications:",e)}}catch(e){window.location.href="/login"}finally{i(!1)}})()},[]),a)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome, ",null==e?void 0:e.fullName,"!"]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Email: ",(0,s.jsx)("span",{className:"font-medium",children:null==e?void 0:e.email})]})]}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),window.location.href="/"},className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Logout"})]})}),n&&(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Total Hubs"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:n.totalHubs||0})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Active Hubs"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:n.activeHubs||0})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Pending Applications"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:n.pendingApplications||0})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Total Packages"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:n.totalPackages||0})]})]}),o.length>0&&(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Pending Hub Applications"}),(0,s.jsx)("div",{className:"space-y-3",children:o.map(e=>{var t,a;return(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Host: ",null==(t=e.host)?void 0:t.fullName," (",null==(a=e.host)?void 0:a.email,")"]}),(0,s.jsx)("div",{className:"flex gap-2 mt-2",children:(0,s.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:e.status})})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("a",{href:"http://localhost:8080/api-docs#/admin/AdminController_getApplicationDetails",target:"_blank",className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"Review"})})]})},e.id)})})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Admin Actions"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("a",{href:"http://localhost:8080/api-docs#/admin",target:"_blank",className:"block p-4 border-2 border-primary-600 rounded-lg hover:bg-primary-50 transition",children:[(0,s.jsx)("h3",{className:"font-semibold text-primary-600 mb-1",children:"Review Hub Applications"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Approve or reject pending hub registrations"})]}),(0,s.jsxs)("a",{href:"http://localhost:8080/api-docs#/admin/AdminController_getAllHubs",target:"_blank",className:"block p-4 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition",children:[(0,s.jsx)("h3",{className:"font-semibold mb-1 text-gray-900",children:"Manage Hubs"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"View and manage all delivery hubs"})]}),(0,s.jsxs)("a",{href:"http://localhost:8080/api-docs",target:"_blank",className:"block p-4 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition",children:[(0,s.jsx)("h3",{className:"font-semibold mb-1 text-gray-900",children:"API Documentation"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Access full API documentation"})]})]})]}),(0,s.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-blue-800",children:[(0,s.jsx)("strong",{children:"Admin Note:"})," Currently, hub review actions must be performed via the"," ",(0,s.jsx)("a",{href:"http://localhost:8080/api-docs",target:"_blank",className:"underline",children:"API documentation"}),". A full admin UI is under development."]})})]})})}},7621:(e,t,a)=>{"use strict";a.d(t,{ZQ:()=>i,bI:()=>n,ic:()=>o,ox:()=>d});var s=a(5125);let l=a(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",r=s.A.create({baseURL:l,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={login:(e,t)=>r.post("/auth/login",{email:e,password:t}),register:e=>r.post("/auth/register",e),getProfile:()=>r.get("/auth/profile")},n={getAll:()=>r.get("/hubs"),getMyHubs:()=>r.get("/hubs/my-hubs"),getById:e=>r.get("/hubs/".concat(e)),getMetrics:(e,t)=>r.get("/hubs/".concat(e,"/metrics"),{params:{days:t}}),create:e=>r.post("/hubs",e),update:(e,t)=>r.put("/hubs/".concat(e),t)},d={getAll:e=>r.get("/packages",{params:e}),getById:e=>r.get("/packages/".concat(e)),track:e=>r.get("/packages/tracking/".concat(e))},o={getDashboard:()=>r.get("/admin/dashboard"),getPendingApplications:(e,t)=>r.get("/admin/applications/pending",{params:{page:e,limit:t}}),getApplicationDetails:e=>r.get("/admin/applications/".concat(e)),reviewApplication:(e,t)=>r.post("/admin/applications/".concat(e,"/review"),t)}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=730)),_N_E=e.O()}]);